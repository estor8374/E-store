<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>e-Store - Home</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f0f0f0; margin: 0; }
    header { background: #4CAF50; color: white; padding: 15px; text-align: center; font-size: 24px; }
    #searchBar {
      width: 90%; max-width: 500px; margin: 20px auto;
      display: block; padding: 10px; border-radius: 5px; border: 1px solid #ccc;
    }
    .product-list { padding: 10px; }
    .product {
      background: white; padding: 10px; margin: 10px 0;
      border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      cursor: pointer;
    }
    footer {
      position: fixed; bottom: 0; width: 100%; background: #ddd;
      display: flex; justify-content: space-around; padding: 10px 0;
    }
    footer button {
      background: none; border: none; font-size: 16px;
    }
  </style>
</head>
<body>

  <header>e-Store</header>
  <input type="text" id="searchBar" placeholder="Search products..." onkeyup="searchProducts()">

  <div class="product-list" id="productList"></div>

  <footer>
    <button onclick="location.href='index.html'">üè† Home</button>
    <button onclick="location.href='cart.html'">üõí Cart</button>
    <button onclick="location.href='profile.html'">üë§ Profile</button>
  </footer>

  <script>
    let all = [];
    const productList = document.getElementById("productList");

    function loadProducts() {
      const keys = Object.keys(localStorage);
      all = [];
      keys.forEach(k => {
        if (k.startsWith("products_")) {
          const list = JSON.parse(localStorage.getItem(k)) || [];
          all = all.concat(list);
        }
      });
      showProducts(all);
    }

    function showProducts(products) {
      productList.innerHTML = '';
      if (products.length === 0) {
        productList.innerHTML = "<p>No products found.</p>";
        return;
      }
      products.forEach(product => {
        const div = document.createElement("div");
        div.className = "product";
        div.onclick = () => {
          localStorage.setItem("selectedProduct", JSON.stringify(product));
          location.href = "product-view.html";
        };
        div.innerHTML = `
          <h3>${product.name}</h3>
          <p>‚Çπ${product.price}</p>
        `;
        productList.appendChild(div);
      });
    }

    function searchProducts() {
      const keyword = document.getElementById("searchBar").value.toLowerCase();
      const filtered = all.filter(p => p.name.toLowerCase().includes(keyword));
      showProducts(filtered);
    }

    loadProducts();
  </script>

</body>
</html>
