<!-- seller.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Seller Add Product</title>
  <style>
    body { font-family: Arial; background: #f9f9f9; padding: 20px; }
    .form-box {
      background: white; padding: 20px; border-radius: 10px; max-width: 400px;
      margin: auto; box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    input, textarea, button {
      display: block; width: 100%; margin: 10px 0; padding: 10px;
      border-radius: 5px; border: 1px solid #ccc;
    }
    button { background: #28a745; color: white; border: none; cursor: pointer; }
    img { max-width: 100%; margin-top: 10px; display: none; }
  </style>
</head>
<body>

  <div class="form-box">
    <h2>Add New Product</h2>
    <input type="text" id="sellerId" placeholder="Your Seller ID (Email)">
    <input type="text" id="productName" placeholder="Product Name">
    <input type="number" id="productPrice" placeholder="Price">
    <textarea id="productDesc" placeholder="Description"></textarea>
    <input type="file" id="productImage" accept="image/*" onchange="previewImage()">
    <img id="imagePreview" />
    <button onclick="addProduct()">Add Product</button>
  </div>
<footer>
  <button onclick="location.href='sel-index.html'">üè† Home</button>
</footer>
  <script>
    let imageData = "";

    function previewImage() {
      const file = document.getElementById("productImage").files[0];
      const reader = new FileReader();
      reader.onload = function(e) {
        imageData = e.target.result;
        document.getElementById("imagePreview").src = imageData;
        document.getElementById("imagePreview").style.display = "block";
      };
      if (file) {
        reader.readAsDataURL(file);
      }
    }

    function addProduct() {
      const id = document.getElementById("sellerId").value.trim();
      const name = document.getElementById("productName").value.trim();
      const price = parseFloat(document.getElementById("productPrice").value);
      const desc = document.getElementById("productDesc").value.trim();

      if (!id || !name || !price || !desc) return alert("All fields required");

      const key = `products_${id}`;
      const product = {
        name,
        price,
        description: desc,
        sellerId: id,
        image: imageData,
        orders: 0
      };
      const existing = JSON.parse(localStorage.getItem(key)) || [];

      existing.push(product);
      localStorage.setItem(key, JSON.stringify(existing));

      alert("Product added!");
      document.querySelectorAll("input, textarea").forEach(el => el.value = "");
      imageData = "";
      document.getElementById("imagePreview").style.display = "none";
    }
  </script>

</body>
</html>
